

### 系统架构



### 方案比较

- 基于Nginx插件

思路：编译一个Nginx的接口监控插件，然后通过Prometheus进行采集，用Grafana进行展示



优点：

1、Nginx作为Http请求的入口，在Nginx上做接口监控，思路上比较直观



缺点：

1、只能够监控到最外层的Http请求，不能够监控到微服务互调的Http请求

2、Nginx编译有一定复杂性，不确定是否能编译成功，不确定后续是否稳定

3、不确定方案是否能够实现，需要进行验证

4、可能会造成Nginx节点的CPU和内存使用增加，负载变大



- 基于微服务网关







- 基于SDK埋点



- 基于日志分析